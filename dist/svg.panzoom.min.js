/*! svg.panzoom.js v1.1.1 MIT*/;!function(){"use strict";var t=function(t){return t.touches||(t.touches=[{clientX:t.clientX,clientY:t.clientY}]),t.touches};SVG.extend(SVG.Doc,SVG.Nested,{panZoom:function(o){o=o||{};var e={doPanning:!0,doPinchZoom:!0,doWheelZoom:!0,zoomFactor:.03,zoomMin:0,zoomMax:Number.MAX_VALUE};for(var n in o)o.hasOwnProperty(n)&&(e[n]=o[n]);var i=e.zoomFactor,s=e.zoomMin,h=e.zoomMax,a=e.doWheelZoom,c=e.doPinchZoom,r=e.doPanning;this.zoomMin=s,this.zoomMax=h,this.doWheelZoom=a,this.doPinchZoom=c,this.doPanning=r;var u,l,m=!1,f=function(o){(l=t(o)).length<2||(o.preventDefault(),this.fire("pinchZoomStart",{event:o}).event().defaultPrevented||(this.off("touchstart",f),m=!0,SVG.on(document,"touchmove",v,this,{passive:!1}),SVG.on(document,"touchend",d,this,{passive:!1})))},d=function(t){t.preventDefault(),m=!1,this.fire("pinchZoomEnd",{event:t}),SVG.off(document,"touchmove",v),SVG.off(document,"touchend",d),this.on("touchstart",f)},v=function(o){o.preventDefault();var e=t(o),n=Math.sqrt(Math.pow(l[0].clientX-l[1].clientX,2)+Math.pow(l[0].clientY-l[1].clientY,2))/Math.sqrt(Math.pow(e[0].clientX-e[1].clientX,2)+Math.pow(e[0].clientY-e[1].clientY,2)),i={x:e[0].clientX+.5*(e[1].clientX-e[0].clientX),y:e[0].clientY+.5*(e[1].clientY-e[0].clientY)},s={x:l[0].clientX+.5*(l[1].clientX-l[0].clientX),y:l[0].clientY+.5*(l[1].clientY-l[0].clientY)},h=this.point(i.x,i.y),a=this.point(2*i.x-s.x,2*i.y-s.y),c=new SVG.Box(this.viewbox()).transform((new SVG.Matrix).translate(h.x,h.y).scale(n,0,0).translate(-a.x,-a.y));this.viewbox(c),l=e,this.fire("zoom",{box:c,focus:a})},x=function(o){o.preventDefault(),this.off("mousedown",x),l=t(o),m||(this.fire("panStart",{event:o}),u={x:l[0].clientX,y:l[0].clientY},SVG.on(document,"mousemove",w,this),SVG.on(document,"mouseup",p,this))},p=function(t){t.preventDefault(),this.fire("panEnd",{event:t}),SVG.off(document,"mousemove",w),SVG.off(document,"mouseup",p),this.on("mousedown",x)},w=function(o){o.preventDefault();var e=t(o),n={x:e[0].clientX,y:e[0].clientY},i=this.point(n.x,n.y),s=this.point(u.x,u.y),h=[s.x-i.x,s.y-i.y],a=new SVG.Box(this.viewbox()).transform((new SVG.Matrix).translate(h[0],h[1]));this.viewbox(a),u=n};return a&&this.on("wheel",function(t){if(t.preventDefault(),0!=t.deltaY){var o=this.zoom()-i*t.deltaY/Math.abs(t.deltaY),e=this.point(t.clientX,t.clientY);this.zoom(o,e)}}),c&&this.on("touchstart",f,this,{passive:!1}),r&&this.on("mousedown",x,this),this},zoom:function(t,o){var e=window.getComputedStyle(this.node),n=parseFloat(e.getPropertyValue("width")),i=parseFloat(e.getPropertyValue("height")),s=this.viewbox(),h=n/s.width,a=i/s.height,c=Math.min(h,a);if(null==t)return c;this.zoomMax&&t>=this.zoomMax&&(t=this.zoomMax),this.zoomMin&&t<=this.zoomMin&&(t=this.zoomMin);var r=c/t;r===1/0&&(r=Number.MIN_VALUE),o=o||new SVG.Point(n/2/h+s.x,i/2/a+s.y);var u=new SVG.Box(s).transform((new SVG.Matrix).scale(r,o.x,o.y));return this.fire("zoom",{box:u,focus:o}).event().defaultPrevented?this:this.viewbox(u)}}),SVG.extend(SVG.FX,{zoom:function(t,o){return this.add("zoom",new SVG.Number(t),o)}})}();