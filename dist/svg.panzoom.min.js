/*! svg.panzoom.js v1.2.1 MIT*/;!function(){"use strict";var f=function(t){return t.touches||(t.touches=[{clientX:t.clientX,clientY:t.clientY}]),t.touches};SVG.extend(SVG.Doc,SVG.Nested,{panZoom:function(t){if(this.off(".panZoom"),!1===t)return this;var c,r,o=(t=t||{}).zoomFactor||.03,m=t.zoomMin||Number.MIN_VALUE,l=t.zoomMax||Number.MAX_VALUE,e=!1,n=function(t){(r=f(t)).length<2||(t.preventDefault(),this.fire("pinchZoomStart",{event:t}).event().defaultPrevented||(this.off("touchstart.panZoom",n),e=!0,SVG.on(document,"touchmove.panZoom",a,this,{passive:!1}),SVG.on(document,"touchend.panZoom",i,this,{passive:!1})))},i=function(t){t.preventDefault(),e=!1,this.fire("pinchZoomEnd",{event:t}),SVG.off(document,"touchmove.panZoom",a),SVG.off(document,"touchend.panZoom",i),this.on("touchstart.panZoom",n)},a=function(t){t.preventDefault();var e=f(t),n=this.zoom(),o=Math.sqrt(Math.pow(r[0].clientX-r[1].clientX,2)+Math.pow(r[0].clientY-r[1].clientY,2))/Math.sqrt(Math.pow(e[0].clientX-e[1].clientX,2)+Math.pow(e[0].clientY-e[1].clientY,2));(n<m&&1<o||l<n&&o<1)&&(o=1);var i={x:e[0].clientX+.5*(e[1].clientX-e[0].clientX),y:e[0].clientY+.5*(e[1].clientY-e[0].clientY)},a=r[0].clientX+.5*(r[1].clientX-r[0].clientX),s=r[0].clientY+.5*(r[1].clientY-r[0].clientY),c=this.point(i.x,i.y),h=this.point(2*i.x-a,2*i.y-s),u=new SVG.Box(this.viewbox()).transform((new SVG.Matrix).translate(c.x,c.y).scale(o,0,0).translate(-h.x,-h.y));this.viewbox(u),r=e,this.fire("zoom",{box:u,focus:h})},s=function(t){t.preventDefault(),this.off("mousedown.panZoom",s),r=f(t),e||(this.fire("panStart",{event:t}),c={x:r[0].clientX,y:r[0].clientY},SVG.on(document,"mousemove.panZoom",u,this),SVG.on(document,"mouseup.panZoom",h,this))},h=function(t){t.preventDefault(),SVG.off(document,"mousemove.panZoom",u),SVG.off(document,"mouseup.panZoom",h),this.on("mousedown.panZoom",s),this.fire("panEnd",{event:t})},u=function(t){t.preventDefault();var e=f(t),n={x:e[0].clientX,y:e[0].clientY},o=this.point(n.x,n.y),i=this.point(c.x,c.y),a=[i.x-o.x,i.y-o.y],s=new SVG.Box(this.viewbox()).transform((new SVG.Matrix).translate(a[0],a[1]));this.viewbox(s),c=n};return this.on("wheel.panZoom",function(t){if(t.preventDefault(),0!=t.deltaY){var e=this.zoom()-o*t.deltaY/Math.abs(t.deltaY),n=this.point(t.clientX,t.clientY);l<e&&(e=l),e<m&&(e=m),this.zoom(e,n)}}),this.on("touchstart.panZoom",n,this,{passive:!1}),this.on("mousedown.panZoom",s,this),this},zoom:function(t,e){var n=this.node.clientWidth,o=this.node.clientHeight,i=this.viewbox(),a=n/i.width,s=o/i.height,c=Math.min(a,s);if(null==t)return c;var h=c/t;h===1/0&&(h=Number.MIN_VALUE),e=e||new SVG.Point(n/2/a+i.x,o/2/s+i.y);var u=new SVG.Box(i).transform((new SVG.Matrix).scale(h,e.x,e.y));return this.fire("zoom",{box:u,focus:e}).event().defaultPrevented?this:this.viewbox(u)}}),SVG.extend(SVG.FX,{zoom:function(t,e){return this.add("zoom",[new SVG.Number(t)].concat(e||[]))}})}();